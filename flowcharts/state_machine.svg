<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: StateMachine Pages: 1 -->
<svg width="1334pt" height="573pt"
 viewBox="0.00 0.00 1334.38 572.75" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 568.75)">
<title>StateMachine</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-568.75 1330.38,-568.75 1330.38,4 -4,4"/>
<text text-anchor="middle" x="663.19" y="-545.55" font-family="Arial" font-size="16.00">ESP32 Stage 1 State Machine</text>
<!-- STARTUP -->
<g id="node1" class="node">
<title>STARTUP</title>
<path fill="#d4f4fa" stroke="#0078d7" stroke-width="2" d="M977.62,-538C977.62,-538 859.62,-538 859.62,-538 853.62,-538 847.62,-532 847.62,-526 847.62,-526 847.62,-513.5 847.62,-513.5 847.62,-507.5 853.62,-501.5 859.62,-501.5 859.62,-501.5 977.62,-501.5 977.62,-501.5 983.62,-501.5 989.62,-507.5 989.62,-513.5 989.62,-513.5 989.62,-526 989.62,-526 989.62,-532 983.62,-538 977.62,-538"/>
<text text-anchor="middle" x="918.62" y="-522.6" font-family="Arial" font-size="12.00">STARTUP</text>
<text text-anchor="middle" x="918.62" y="-508.35" font-family="Arial" font-size="12.00">Initial state, sets clamps</text>
</g>
<!-- HOMING -->
<g id="node2" class="node">
<title>HOMING</title>
<path fill="#d4f4fa" stroke="#0078d7" stroke-width="2" d="M1009.88,-416C1009.88,-416 827.38,-416 827.38,-416 821.38,-416 815.38,-410 815.38,-404 815.38,-404 815.38,-391.5 815.38,-391.5 815.38,-385.5 821.38,-379.5 827.38,-379.5 827.38,-379.5 1009.88,-379.5 1009.88,-379.5 1015.88,-379.5 1021.88,-385.5 1021.88,-391.5 1021.88,-391.5 1021.88,-404 1021.88,-404 1021.88,-410 1015.88,-416 1009.88,-416"/>
<text text-anchor="middle" x="918.62" y="-400.6" font-family="Arial" font-size="12.00">HOMING</text>
<text text-anchor="middle" x="918.62" y="-386.35" font-family="Arial" font-size="12.00">Calibrates motors to home positions</text>
</g>
<!-- STARTUP&#45;&gt;HOMING -->
<g id="edge1" class="edge">
<title>STARTUP&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M918.62,-500.52C918.62,-481.12 918.62,-450.14 918.62,-427.45"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="921.78,-427.57 918.63,-418.57 915.48,-427.57 921.78,-427.57"/>
<text text-anchor="middle" x="943.75" y="-455.05" font-family="Arial" font-size="11.00">Immediate</text>
</g>
<!-- READY -->
<g id="node3" class="node">
<title>READY</title>
<path fill="#ccffcc" stroke="#0078d7" stroke-width="2" d="M254.88,-294C254.88,-294 138.38,-294 138.38,-294 132.38,-294 126.38,-288 126.38,-282 126.38,-282 126.38,-269.5 126.38,-269.5 126.38,-263.5 132.38,-257.5 138.38,-257.5 138.38,-257.5 254.88,-257.5 254.88,-257.5 260.88,-257.5 266.88,-263.5 266.88,-269.5 266.88,-269.5 266.88,-282 266.88,-282 266.88,-288 260.88,-294 254.88,-294"/>
<text text-anchor="middle" x="196.62" y="-278.6" font-family="Arial" font-size="12.00">READY</text>
<text text-anchor="middle" x="196.62" y="-264.35" font-family="Arial" font-size="12.00">Waiting for cycle switch</text>
</g>
<!-- HOMING&#45;&gt;READY -->
<g id="edge2" class="edge">
<title>HOMING&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M814.43,-383.28C739.29,-373.24 635.51,-358.68 544.62,-343.5 453.15,-328.22 348.72,-307.79 278.33,-293.57"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="278.99,-290.49 269.54,-291.79 277.74,-296.67 278.99,-290.49"/>
<text text-anchor="middle" x="586.62" y="-333.05" font-family="Arial" font-size="11.00">Homing complete</text>
</g>
<!-- ERROR -->
<g id="node8" class="node">
<title>ERROR</title>
<path fill="#ffd2d2" stroke="#0078d7" stroke-width="2" d="M964.12,-36.5C964.12,-36.5 873.12,-36.5 873.12,-36.5 867.12,-36.5 861.12,-30.5 861.12,-24.5 861.12,-24.5 861.12,-12 861.12,-12 861.12,-6 867.12,0 873.12,0 873.12,0 964.12,0 964.12,0 970.12,0 976.12,-6 976.12,-12 976.12,-12 976.12,-24.5 976.12,-24.5 976.12,-30.5 970.12,-36.5 964.12,-36.5"/>
<text text-anchor="middle" x="918.62" y="-21.1" font-family="Arial" font-size="12.00">ERROR</text>
<text text-anchor="middle" x="918.62" y="-6.85" font-family="Arial" font-size="12.00">General error state</text>
</g>
<!-- HOMING&#45;&gt;ERROR -->
<g id="edge3" class="edge">
<title>HOMING&#45;&gt;ERROR</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M906.06,-378.93C885.4,-348.42 845.1,-283.48 830.38,-221.5 814.57,-154.97 863.71,-82.89 894.91,-45.34"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="897.03,-47.71 900.47,-38.82 892.24,-43.63 897.03,-47.71"/>
<text text-anchor="middle" x="878" y="-204.3" font-family="Arial" font-size="11.00">Position motor error</text>
</g>
<!-- CUT_MOTOR_HOME_ERROR -->
<g id="node10" class="node">
<title>CUT_MOTOR_HOME_ERROR</title>
<path fill="#ffcccb" stroke="#0078d7" stroke-width="2" d="M1314.38,-36.5C1314.38,-36.5 1152.88,-36.5 1152.88,-36.5 1146.88,-36.5 1140.88,-30.5 1140.88,-24.5 1140.88,-24.5 1140.88,-12 1140.88,-12 1140.88,-6 1146.88,0 1152.88,0 1152.88,0 1314.38,0 1314.38,0 1320.38,0 1326.38,-6 1326.38,-12 1326.38,-12 1326.38,-24.5 1326.38,-24.5 1326.38,-30.5 1320.38,-36.5 1314.38,-36.5"/>
<text text-anchor="middle" x="1233.62" y="-21.1" font-family="Arial" font-size="12.00">CUT_MOTOR_HOME_ERROR</text>
<text text-anchor="middle" x="1233.62" y="-6.85" font-family="Arial" font-size="12.00">Cut motor homing failure</text>
</g>
<!-- HOMING&#45;&gt;CUT_MOTOR_HOME_ERROR -->
<g id="edge4" class="edge">
<title>HOMING&#45;&gt;CUT_MOTOR_HOME_ERROR</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M936.46,-378.85C946.42,-368.68 958.95,-355.59 969.62,-343.5 1064.52,-236.09 1170.07,-101.49 1213.4,-45.53"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="1215.68,-47.72 1218.69,-38.68 1210.7,-43.87 1215.68,-47.72"/>
<text text-anchor="middle" x="1131.68" y="-204.3" font-family="Arial" font-size="11.00">Cut motor error</text>
</g>
<!-- RELOAD -->
<g id="node4" class="node">
<title>RELOAD</title>
<path fill="#ccffff" stroke="#0078d7" stroke-width="2" d="M566.75,-294C566.75,-294 428.5,-294 428.5,-294 422.5,-294 416.5,-288 416.5,-282 416.5,-282 416.5,-269.5 416.5,-269.5 416.5,-263.5 422.5,-257.5 428.5,-257.5 428.5,-257.5 566.75,-257.5 566.75,-257.5 572.75,-257.5 578.75,-263.5 578.75,-269.5 578.75,-269.5 578.75,-282 578.75,-282 578.75,-288 572.75,-294 566.75,-294"/>
<text text-anchor="middle" x="497.62" y="-278.6" font-family="Arial" font-size="12.00">RELOAD</text>
<text text-anchor="middle" x="497.62" y="-264.35" font-family="Arial" font-size="12.00">Waiting for reload switch off</text>
</g>
<!-- READY&#45;&gt;RELOAD -->
<g id="edge5" class="edge">
<title>READY&#45;&gt;RELOAD</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M267.75,-262.71C277.93,-261.27 288.31,-260.05 298.19,-259.25 336.73,-256.14 346.62,-256.44 385.19,-259.25 391.71,-259.73 398.43,-260.36 405.18,-261.09"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="404.69,-264.2 413.99,-262.12 405.42,-257.95 404.69,-264.2"/>
<text text-anchor="middle" x="341.69" y="-262.3" font-family="Arial" font-size="11.00">Reload switch ON</text>
</g>
<!-- CUTTING -->
<g id="node5" class="node">
<title>CUTTING</title>
<path fill="#ffffcc" stroke="#0078d7" stroke-width="2" d="M483.12,-158.5C483.12,-158.5 344.12,-158.5 344.12,-158.5 338.12,-158.5 332.12,-152.5 332.12,-146.5 332.12,-146.5 332.12,-134 332.12,-134 332.12,-128 338.12,-122 344.12,-122 344.12,-122 483.12,-122 483.12,-122 489.12,-122 495.12,-128 495.12,-134 495.12,-134 495.12,-146.5 495.12,-146.5 495.12,-152.5 489.12,-158.5 483.12,-158.5"/>
<text text-anchor="middle" x="413.62" y="-143.1" font-family="Arial" font-size="12.00">CUTTING</text>
<text text-anchor="middle" x="413.62" y="-128.85" font-family="Arial" font-size="12.00">Executing cutting sequence</text>
</g>
<!-- READY&#45;&gt;CUTTING -->
<g id="edge6" class="edge">
<title>READY&#45;&gt;CUTTING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M225.89,-256.75C264.48,-233.01 332.46,-191.19 375.16,-164.91"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="376.57,-167.75 382.58,-160.35 373.27,-162.38 376.57,-167.75"/>
<text text-anchor="middle" x="369.56" y="-211.05" font-family="Arial" font-size="11.00">Cycle switch ON &amp;</text>
<text text-anchor="middle" x="369.56" y="-197.55" font-family="Arial" font-size="11.00">Toggle not needed</text>
</g>
<!-- RELOAD&#45;&gt;READY -->
<g id="edge7" class="edge">
<title>RELOAD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M415.7,-275.75C372.98,-275.75 320.88,-275.75 278.21,-275.75"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="278.39,-272.6 269.39,-275.75 278.39,-278.9 278.39,-272.6"/>
<text text-anchor="middle" x="341.69" y="-281.8" font-family="Arial" font-size="11.00">Reload switch OFF</text>
</g>
<!-- YESWOOD -->
<g id="node6" class="node">
<title>YESWOOD</title>
<path fill="#e6ffe6" stroke="#0078d7" stroke-width="2" d="M129.25,-36.5C129.25,-36.5 12,-36.5 12,-36.5 6,-36.5 0,-30.5 0,-24.5 0,-24.5 0,-12 0,-12 0,-6 6,0 12,0 12,0 129.25,0 129.25,0 135.25,0 141.25,-6 141.25,-12 141.25,-12 141.25,-24.5 141.25,-24.5 141.25,-30.5 135.25,-36.5 129.25,-36.5"/>
<text text-anchor="middle" x="70.62" y="-21.1" font-family="Arial" font-size="12.00">YESWOOD</text>
<text text-anchor="middle" x="70.62" y="-6.85" font-family="Arial" font-size="12.00">Wood detected after cut</text>
</g>
<!-- CUTTING&#45;&gt;YESWOOD -->
<g id="edge8" class="edge">
<title>CUTTING&#45;&gt;YESWOOD</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M361.53,-121.02C300.16,-99.55 198.28,-63.91 132.83,-41.01"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="133.9,-38.05 124.36,-38.05 131.82,-44 133.9,-38.05"/>
<text text-anchor="middle" x="288.78" y="-75.55" font-family="Arial" font-size="11.00">Wood detected</text>
</g>
<!-- NOWOOD -->
<g id="node7" class="node">
<title>NOWOOD</title>
<path fill="#e6e6ff" stroke="#0078d7" stroke-width="2" d="M426.5,-36.5C426.5,-36.5 292.75,-36.5 292.75,-36.5 286.75,-36.5 280.75,-30.5 280.75,-24.5 280.75,-24.5 280.75,-12 280.75,-12 280.75,-6 286.75,0 292.75,0 292.75,0 426.5,0 426.5,0 432.5,0 438.5,-6 438.5,-12 438.5,-12 438.5,-24.5 438.5,-24.5 438.5,-30.5 432.5,-36.5 426.5,-36.5"/>
<text text-anchor="middle" x="359.62" y="-21.1" font-family="Arial" font-size="12.00">NOWOOD</text>
<text text-anchor="middle" x="359.62" y="-6.85" font-family="Arial" font-size="12.00">No wood detected after cut</text>
</g>
<!-- CUTTING&#45;&gt;NOWOOD -->
<g id="edge9" class="edge">
<title>CUTTING&#45;&gt;NOWOOD</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M405.42,-121.02C396.57,-101.35 382.37,-69.78 372.12,-47.02"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="375.04,-45.82 368.47,-38.91 369.29,-48.41 375.04,-45.82"/>
<text text-anchor="middle" x="432.12" y="-75.55" font-family="Arial" font-size="11.00">No wood detected</text>
</g>
<!-- WOOD_SUCTION_ERROR -->
<g id="node9" class="node">
<title>WOOD_SUCTION_ERROR</title>
<path fill="#ffcccb" stroke="#0078d7" stroke-width="2" d="M692,-36.5C692,-36.5 549.25,-36.5 549.25,-36.5 543.25,-36.5 537.25,-30.5 537.25,-24.5 537.25,-24.5 537.25,-12 537.25,-12 537.25,-6 543.25,0 549.25,0 549.25,0 692,0 692,0 698,0 704,-6 704,-12 704,-12 704,-24.5 704,-24.5 704,-30.5 698,-36.5 692,-36.5"/>
<text text-anchor="middle" x="620.62" y="-21.1" font-family="Arial" font-size="12.00">WOOD_SUCTION_ERROR</text>
<text text-anchor="middle" x="620.62" y="-6.85" font-family="Arial" font-size="12.00">Wood suction failure</text>
</g>
<!-- CUTTING&#45;&gt;WOOD_SUCTION_ERROR -->
<g id="edge10" class="edge">
<title>CUTTING&#45;&gt;WOOD_SUCTION_ERROR</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M445.06,-121.02C481.19,-100.08 540.56,-65.66 580.12,-42.73"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="581.45,-45.6 587.66,-38.36 578.29,-40.15 581.45,-45.6"/>
<text text-anchor="middle" x="557.46" y="-75.55" font-family="Arial" font-size="11.00">Suction failure</text>
</g>
<!-- YESWOOD&#45;&gt;READY -->
<g id="edge11" class="edge">
<title>YESWOOD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M55.35,-37.14C34.06,-64.38 0.41,-117.44 22.38,-158.5 46.3,-203.23 95.9,-233.73 136.08,-252.23"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="134.64,-255.04 144.14,-255.82 137.2,-249.28 134.64,-255.04"/>
<text text-anchor="middle" x="70" y="-136.55" font-family="Arial" font-size="11.00">Sequence complete</text>
</g>
<!-- NOWOOD&#45;&gt;READY -->
<g id="edge12" class="edge">
<title>NOWOOD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M280,-34.73C258.7,-42.63 237.71,-54.54 223.62,-72.5 183.99,-123.03 186.95,-203.43 192.06,-246.05"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="188.9,-246.21 193.21,-254.72 195.14,-245.38 188.9,-246.21"/>
<text text-anchor="middle" x="238.21" y="-136.55" font-family="Arial" font-size="11.00">Return complete</text>
</g>
<!-- ERROR&#45;&gt;HOMING -->
<g id="edge13" class="edge">
<title>ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M921.76,-37.35C927.52,-72.7 938.92,-153.4 935.62,-221.5 933.12,-273.35 926.46,-333.52 922.26,-368.16"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="919.13,-367.76 921.16,-377.08 925.38,-368.53 919.13,-367.76"/>
<text text-anchor="middle" x="987.96" y="-204.3" font-family="Arial" font-size="11.00">Cycle toggle detected</text>
</g>
<!-- WOOD_SUCTION_ERROR&#45;&gt;HOMING -->
<g id="edge14" class="edge">
<title>WOOD_SUCTION_ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M625.62,-37.46C636.47,-74.74 664.93,-161.33 710.12,-221.5 758.48,-285.88 834.75,-342.14 880.41,-372.61"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="878.62,-375.21 887.87,-377.53 882.09,-369.95 878.62,-375.21"/>
<text text-anchor="middle" x="761.88" y="-204.3" font-family="Arial" font-size="11.00">Cycle toggle detected</text>
</g>
<!-- CUT_MOTOR_HOME_ERROR&#45;&gt;HOMING -->
<g id="edge15" class="edge">
<title>CUT_MOTOR_HOME_ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M1234.24,-37.27C1234.37,-50.8 1233.8,-69.72 1230.62,-86 1218.39,-148.71 1220.49,-170.04 1182.62,-221.5 1128.58,-294.95 1033.83,-346.76 973.75,-374.16"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="972.63,-371.21 965.71,-377.76 975.21,-376.96 972.63,-371.21"/>
<text text-anchor="middle" x="1254.8" y="-211.05" font-family="Arial" font-size="11.00">Successful recovery or</text>
<text text-anchor="middle" x="1254.8" y="-197.55" font-family="Arial" font-size="11.00">Cycle toggle</text>
</g>
</g>
</svg>
