<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: StateMachine Pages: 1 -->
<svg width="1133pt" height="531pt"
 viewBox="0.00 0.00 1132.50 531.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 527.4)">
<title>StateMachine</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-527.4 1128.5,-527.4 1128.5,4 -4,4"/>
<text text-anchor="middle" x="562.25" y="-504.2" font-family="Arial" font-size="16.00">ESP32&#45;S3 Stage 1 State Machine</text>
<g id="clust1" class="cluster">
<title>cluster_init</title>
<polygon fill="#f9f9f9" stroke="#888888" stroke-dasharray="5,2" points="56.25,-127.5 56.25,-339.25 278.25,-339.25 278.25,-127.5 56.25,-127.5"/>
<text text-anchor="middle" x="167.25" y="-321.95" font-family="Arial" font-size="14.00">One&#45;Time Initialization</text>
</g>
<!-- STARTUP -->
<g id="node1" class="node">
<title>STARTUP</title>
<polygon fill="#d4f4fa" stroke="#0078d7" stroke-width="2" points="238.25,-307.5 96.25,-307.5 96.25,-271 238.25,-271 238.25,-307.5"/>
<text text-anchor="middle" x="167.25" y="-292.1" font-family="Arial" font-size="12.00">STARTUP</text>
<text text-anchor="middle" x="167.25" y="-277.85" font-family="Arial" font-size="12.00">Initial state, sets clamps</text>
</g>
<!-- HOMING -->
<g id="node2" class="node">
<title>HOMING</title>
<polygon fill="#d4f4fa" stroke="#0078d7" stroke-width="2" points="270.5,-172 64,-172 64,-135.5 270.5,-135.5 270.5,-172"/>
<text text-anchor="middle" x="167.25" y="-156.6" font-family="Arial" font-size="12.00">HOMING</text>
<text text-anchor="middle" x="167.25" y="-142.35" font-family="Arial" font-size="12.00">Calibrates motors to home positions</text>
</g>
<!-- STARTUP&#45;&gt;HOMING -->
<g id="edge1" class="edge">
<title>STARTUP&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M167.25,-270.25C167.25,-247.95 167.25,-209.7 167.25,-183.37"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="170.4,-183.71 167.25,-174.71 164.1,-183.71 170.4,-183.71"/>
<text text-anchor="middle" x="192.38" y="-217.8" font-family="Arial" font-size="11.00">Immediate</text>
</g>
<!-- READY -->
<g id="node3" class="node">
<title>READY</title>
<polygon fill="#ccffcc" stroke="#0078d7" stroke-width="3" points="769.25,-496.65 585.25,-496.65 585.25,-410.25 769.25,-410.25 769.25,-496.65"/>
<text text-anchor="middle" x="677.25" y="-457" font-family="Arial" font-size="16.00">READY</text>
<text text-anchor="middle" x="677.25" y="-438.25" font-family="Arial" font-size="16.00">Waiting for cycle switch</text>
</g>
<!-- HOMING&#45;&gt;READY -->
<g id="edge2" class="edge">
<title>HOMING&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M198.4,-172.93C275.61,-218 477.92,-336.1 593.36,-403.48"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="591.62,-406.11 600.98,-407.93 594.79,-400.67 591.62,-406.11"/>
<text text-anchor="middle" x="523.27" y="-285.55" font-family="Arial" font-size="11.00">Homing complete</text>
</g>
<!-- ERROR -->
<g id="node8" class="node">
<title>ERROR</title>
<polygon fill="#ffd2d2" stroke="#0078d7" stroke-width="2" points="145.75,-36.5 30.75,-36.5 30.75,0 145.75,0 145.75,-36.5"/>
<text text-anchor="middle" x="88.25" y="-21.1" font-family="Arial" font-size="12.00">ERROR</text>
<text text-anchor="middle" x="88.25" y="-6.85" font-family="Arial" font-size="12.00">General error state</text>
</g>
<!-- HOMING&#45;&gt;ERROR -->
<g id="edge3" class="edge">
<title>HOMING&#45;&gt;ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M110.16,-134.57C61.71,-119.15 0,-99.5 0,-99.5 0,-99.5 0,-72.5 0,-72.5 0,-72.5 25.54,-57.09 49.14,-42.85"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="50.74,-45.56 56.82,-38.22 47.48,-40.17 50.74,-45.56"/>
<text text-anchor="middle" x="47.62" y="-82.3" font-family="Arial" font-size="11.00">Position motor error</text>
</g>
<!-- CUT_MOTOR_HOME_ERROR -->
<g id="node10" class="node">
<title>CUT_MOTOR_HOME_ERROR</title>
<polygon fill="#ffcccb" stroke="#0078d7" stroke-width="2" points="564,-36.5 378.5,-36.5 378.5,0 564,0 564,-36.5"/>
<text text-anchor="middle" x="471.25" y="-21.1" font-family="Arial" font-size="12.00">CUT_MOTOR_HOME_ERROR</text>
<text text-anchor="middle" x="471.25" y="-6.85" font-family="Arial" font-size="12.00">Cut motor homing failure</text>
</g>
<!-- HOMING&#45;&gt;CUT_MOTOR_HOME_ERROR -->
<g id="edge4" class="edge">
<title>HOMING&#45;&gt;CUT_MOTOR_HOME_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M203.05,-134.54C249.59,-110.86 325,-72.5 325,-72.5 325,-72.5 370.86,-55.8 411.22,-41.11"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="412.24,-44.09 419.62,-38.05 410.09,-38.17 412.24,-44.09"/>
<text text-anchor="middle" x="362.12" y="-82.3" font-family="Arial" font-size="11.00">Cut motor error</text>
</g>
<!-- RELOAD -->
<g id="node4" class="node">
<title>RELOAD</title>
<polygon fill="#ccffff" stroke="#0078d7" stroke-width="2" points="1081.38,-471.7 919.12,-471.7 919.12,-435.2 1081.38,-435.2 1081.38,-471.7"/>
<text text-anchor="middle" x="1000.25" y="-456.3" font-family="Arial" font-size="12.00">RELOAD</text>
<text text-anchor="middle" x="1000.25" y="-442.05" font-family="Arial" font-size="12.00">Waiting for reload switch off</text>
</g>
<!-- READY&#45;&gt;RELOAD -->
<g id="edge5" class="edge">
<title>READY&#45;&gt;RELOAD</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M770.49,-440.99C787.87,-438.66 800.69,-436.95 800.69,-436.95 800.69,-436.95 887.69,-436.95 887.69,-436.95 887.69,-436.95 895.71,-438.13 907.48,-439.85"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="906.99,-442.96 916.35,-441.15 907.9,-436.73 906.99,-442.96"/>
<text text-anchor="middle" x="844.19" y="-440" font-family="Arial" font-size="11.00">Reload switch ON</text>
</g>
<!-- CUTTING -->
<g id="node5" class="node">
<title>CUTTING</title>
<polygon fill="#ffffcc" stroke="#0078d7" stroke-width="2" points="881.75,-307.5 718.75,-307.5 718.75,-271 881.75,-271 881.75,-307.5"/>
<text text-anchor="middle" x="800.25" y="-292.1" font-family="Arial" font-size="12.00">CUTTING</text>
<text text-anchor="middle" x="800.25" y="-277.85" font-family="Arial" font-size="12.00">Executing cutting sequence</text>
</g>
<!-- READY&#45;&gt;CUTTING -->
<g id="edge6" class="edge">
<title>READY&#45;&gt;CUTTING</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M710.21,-408.98C731.74,-380.6 759.26,-344.31 778.17,-319.36"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="780.48,-321.53 783.41,-312.45 775.47,-317.72 780.48,-321.53"/>
<text text-anchor="middle" x="801.95" y="-363.8" font-family="Arial" font-size="11.00">Cycle switch ON &amp;</text>
<text text-anchor="middle" x="801.95" y="-350.3" font-family="Arial" font-size="11.00">Toggle not needed</text>
</g>
<!-- RELOAD&#45;&gt;READY -->
<g id="edge7" class="edge">
<title>RELOAD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M918.29,-453.45C876.64,-453.45 825.59,-453.45 781.21,-453.45"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="781.49,-450.3 772.49,-453.45 781.49,-456.6 781.49,-450.3"/>
<text text-anchor="middle" x="844.19" y="-459.5" font-family="Arial" font-size="11.00">Reload switch OFF</text>
</g>
<!-- YESWOOD -->
<g id="node6" class="node">
<title>YESWOOD</title>
<polygon fill="#e6ffe6" stroke="#0078d7" stroke-width="2" points="716.88,-172 575.62,-172 575.62,-135.5 716.88,-135.5 716.88,-172"/>
<text text-anchor="middle" x="646.25" y="-156.6" font-family="Arial" font-size="12.00">YESWOOD</text>
<text text-anchor="middle" x="646.25" y="-142.35" font-family="Arial" font-size="12.00">Wood detected after cut</text>
</g>
<!-- CUTTING&#45;&gt;YESWOOD -->
<g id="edge8" class="edge">
<title>CUTTING&#45;&gt;YESWOOD</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M745.04,-270.07C698.18,-254.65 638.5,-235 638.5,-235 638.5,-235 638.5,-208 638.5,-208 638.5,-208 639.92,-198.22 641.55,-187.05"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="644.66,-187.53 642.84,-178.17 638.43,-186.62 644.66,-187.53"/>
<text text-anchor="middle" x="674.88" y="-217.8" font-family="Arial" font-size="11.00">Wood detected</text>
</g>
<!-- NOWOOD -->
<g id="node7" class="node">
<title>NOWOOD</title>
<polygon fill="#e6e6ff" stroke="#0078d7" stroke-width="2" points="1027.12,-172 869.38,-172 869.38,-135.5 1027.12,-135.5 1027.12,-172"/>
<text text-anchor="middle" x="948.25" y="-156.6" font-family="Arial" font-size="12.00">NOWOOD</text>
<text text-anchor="middle" x="948.25" y="-142.35" font-family="Arial" font-size="12.00">No wood detected after cut</text>
</g>
<!-- CUTTING&#45;&gt;NOWOOD -->
<g id="edge9" class="edge">
<title>CUTTING&#45;&gt;NOWOOD</title>
<path fill="none" stroke="#ffcc00" stroke-width="2.4" d="M830.97,-270.07C857.04,-254.65 890.25,-235 890.25,-235 890.25,-235 911.1,-206.15 927.8,-183.05"/>
<polygon fill="#ffcc00" stroke="#ffcc00" stroke-width="2.4" points="930.24,-185.04 932.96,-175.9 925.14,-181.35 930.24,-185.04"/>
<text text-anchor="middle" x="952.89" y="-217.8" font-family="Arial" font-size="11.00">No wood detected</text>
</g>
<!-- WOOD_SUCTION_ERROR -->
<g id="node9" class="node">
<title>WOOD_SUCTION_ERROR</title>
<polygon fill="#ffcccb" stroke="#0078d7" stroke-width="2" points="1100.62,-36.5 933.88,-36.5 933.88,0 1100.62,0 1100.62,-36.5"/>
<text text-anchor="middle" x="1017.25" y="-21.1" font-family="Arial" font-size="12.00">WOOD_SUCTION_ERROR</text>
<text text-anchor="middle" x="1017.25" y="-6.85" font-family="Arial" font-size="12.00">Wood suction failure</text>
</g>
<!-- CUTTING&#45;&gt;WOOD_SUCTION_ERROR -->
<g id="edge10" class="edge">
<title>CUTTING&#45;&gt;WOOD_SUCTION_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M872.27,-270.07C933.4,-254.65 1011.25,-235 1011.25,-235 1011.25,-235 1056.25,-172 1056.25,-172 1056.25,-172 1056.25,-127.5 1056.25,-127.5 1056.25,-127.5 1038.91,-79.37 1027.35,-47.29"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="1030.32,-46.23 1024.31,-38.83 1024.39,-48.37 1030.32,-46.23"/>
<text text-anchor="middle" x="1090.38" y="-150.05" font-family="Arial" font-size="11.00">Suction failure</text>
</g>
<!-- YESWOOD&#45;&gt;READY -->
<g id="edge11" class="edge">
<title>YESWOOD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M636.48,-172.91C618.91,-205.61 583.75,-271 583.75,-271 583.75,-271 583.75,-339.25 583.75,-339.25 583.75,-339.25 609.86,-370.86 634.48,-400.67"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="632.05,-402.67 640.21,-407.61 636.91,-398.66 632.05,-402.67"/>
<text text-anchor="middle" x="637" y="-292.3" font-family="Arial" font-size="11.00">Operation complete or</text>
<text text-anchor="middle" x="637" y="-278.8" font-family="Arial" font-size="11.00">reload requested</text>
</g>
<!-- YESWOOD&#45;&gt;CUTTING -->
<g id="edge12" class="edge">
<title>YESWOOD&#45;&gt;CUTTING</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M671.64,-172.78C693.4,-188.23 721.25,-208 721.25,-208 721.25,-208 749.65,-236.85 772.39,-259.95"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="769.94,-261.95 778.5,-266.16 774.43,-257.53 769.94,-261.95"/>
<text text-anchor="middle" x="799.68" y="-224.55" font-family="Arial" font-size="11.00">Continue cutting while</text>
<text text-anchor="middle" x="799.68" y="-211.05" font-family="Arial" font-size="11.00">wood is available</text>
</g>
<!-- YESWOOD&#45;&gt;CUT_MOTOR_HOME_ERROR -->
<g id="edge13" class="edge">
<title>YESWOOD&#45;&gt;CUT_MOTOR_HOME_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M631.95,-134.54C613.37,-110.86 583.25,-72.5 583.25,-72.5 583.25,-72.5 549.6,-56.5 519.19,-42.04"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="520.6,-39.23 511.12,-38.21 517.9,-44.92 520.6,-39.23"/>
<text text-anchor="middle" x="638.5" y="-89.05" font-family="Arial" font-size="11.00">Cut motor fails</text>
<text text-anchor="middle" x="638.5" y="-75.55" font-family="Arial" font-size="11.00">to home</text>
</g>
<!-- NOWOOD&#45;&gt;READY -->
<g id="edge14" class="edge">
<title>NOWOOD&#45;&gt;READY</title>
<path fill="none" stroke="#ffcc00" stroke-width="2.4" d="M969.58,-172.78C987.86,-188.23 1011.25,-208 1011.25,-208 1011.25,-208 1011.25,-235 1011.25,-235 1011.25,-235 911.25,-339.25 911.25,-339.25 911.25,-339.25 861.25,-374.25 861.25,-374.25 861.25,-374.25 823.4,-390.34 782.04,-407.92"/>
<polygon fill="#ffcc00" stroke="#ffcc00" stroke-width="2.4" points="780.99,-404.94 773.94,-411.36 783.46,-410.74 780.99,-404.94"/>
<text text-anchor="middle" x="1015.8" y="-285.55" font-family="Arial" font-size="11.00">Return complete</text>
</g>
<!-- ERROR&#45;&gt;HOMING -->
<g id="edge15" class="edge">
<title>ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M98.99,-37.4C112.46,-60.16 135.67,-99.38 151.24,-125.69"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="148.38,-127.04 155.67,-133.18 153.8,-123.83 148.38,-127.04"/>
<text text-anchor="middle" x="186.58" y="-82.3" font-family="Arial" font-size="11.00">Cycle toggle detected</text>
</g>
<!-- WOOD_SUCTION_ERROR&#45;&gt;HOMING -->
<g id="edge16" class="edge">
<title>WOOD_SUCTION_ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M942.37,-37.46C845,-61.14 687.25,-99.5 687.25,-99.5 687.25,-99.5 434.72,-125.36 281.62,-141.04"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="281.67,-137.87 273.04,-141.92 282.31,-144.13 281.67,-137.87"/>
<text text-anchor="middle" x="845.74" y="-82.3" font-family="Arial" font-size="11.00">Cycle toggle detected</text>
</g>
<!-- CUT_MOTOR_HOME_ERROR&#45;&gt;HOMING -->
<g id="edge17" class="edge">
<title>CUT_MOTOR_HOME_ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M457.18,-37.46C438.89,-61.14 409.25,-99.5 409.25,-99.5 409.25,-99.5 328.47,-117.28 260.25,-132.29"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="259.74,-129.17 251.63,-134.18 261.1,-135.33 259.74,-129.17"/>
<text text-anchor="middle" x="483.68" y="-89.05" font-family="Arial" font-size="11.00">Successful recovery or</text>
<text text-anchor="middle" x="483.68" y="-75.55" font-family="Arial" font-size="11.00">Cycle toggle</text>
</g>
</g>
</svg>
