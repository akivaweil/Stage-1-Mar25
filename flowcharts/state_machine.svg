<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: StateMachine Pages: 1 -->
<svg width="1256pt" height="531pt"
 viewBox="0.00 0.00 1255.72 531.40" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 527.4)">
<title>StateMachine</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-527.4 1251.72,-527.4 1251.72,4 -4,4"/>
<text text-anchor="middle" x="623.86" y="-504.2" font-family="Arial" font-size="16.00">ESP32&#45;S3 Stage 1 State Machine</text>
<g id="clust1" class="cluster">
<title>cluster_init</title>
<polygon fill="#f9f9f9" stroke="#888888" stroke-dasharray="5,2" points="61.6,-127.5 61.6,-339.25 283.6,-339.25 283.6,-127.5 61.6,-127.5"/>
<text text-anchor="middle" x="172.6" y="-321.95" font-family="Arial" font-size="14.00">One&#45;Time Initialization</text>
</g>
<!-- STARTUP -->
<g id="node1" class="node">
<title>STARTUP</title>
<polygon fill="#d4f4fa" stroke="#0078d7" stroke-width="2" points="243.6,-307.5 101.6,-307.5 101.6,-271 243.6,-271 243.6,-307.5"/>
<text text-anchor="middle" x="172.6" y="-292.1" font-family="Arial" font-size="12.00">STARTUP</text>
<text text-anchor="middle" x="172.6" y="-277.85" font-family="Arial" font-size="12.00">Initial state, sets clamps</text>
</g>
<!-- HOMING -->
<g id="node2" class="node">
<title>HOMING</title>
<polygon fill="#d4f4fa" stroke="#0078d7" stroke-width="2" points="275.85,-172 69.35,-172 69.35,-135.5 275.85,-135.5 275.85,-172"/>
<text text-anchor="middle" x="172.6" y="-156.6" font-family="Arial" font-size="12.00">HOMING</text>
<text text-anchor="middle" x="172.6" y="-142.35" font-family="Arial" font-size="12.00">Calibrates motors to home positions</text>
</g>
<!-- STARTUP&#45;&gt;HOMING -->
<g id="edge1" class="edge">
<title>STARTUP&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M172.6,-270.25C172.6,-247.95 172.6,-209.7 172.6,-183.37"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="175.75,-183.71 172.6,-174.71 169.45,-183.71 175.75,-183.71"/>
<text text-anchor="middle" x="197.72" y="-217.8" font-family="Arial" font-size="11.00">Immediate</text>
</g>
<!-- READY -->
<g id="node3" class="node">
<title>READY</title>
<polygon fill="#ccffcc" stroke="#0078d7" stroke-width="3" points="935.6,-496.65 751.6,-496.65 751.6,-410.25 935.6,-410.25 935.6,-496.65"/>
<text text-anchor="middle" x="843.6" y="-457" font-family="Arial" font-size="16.00">READY</text>
<text text-anchor="middle" x="843.6" y="-438.25" font-family="Arial" font-size="16.00">Waiting for cycle switch</text>
</g>
<!-- HOMING&#45;&gt;READY -->
<g id="edge2" class="edge">
<title>HOMING&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M559.6,-361.75C617.61,-399.06 692.17,-422.1 750.34,-435.62"/>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M195.5,-172.75C249.5,-214.86 384.18,-317.85 436.6,-339.25 484.4,-358.76 506.76,-338.42 549.78,-355.38"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="548.44,-358.23 557.94,-359.01 551,-352.48 548.44,-358.23"/>
<text text-anchor="middle" x="478.6" y="-285.55" font-family="Arial" font-size="11.00">Homing complete</text>
</g>
<!-- ERROR -->
<g id="node8" class="node">
<title>ERROR</title>
<polygon fill="#ffd2d2" stroke="#0078d7" stroke-width="2" points="151.1,-36.5 36.1,-36.5 36.1,0 151.1,0 151.1,-36.5"/>
<text text-anchor="middle" x="93.6" y="-21.1" font-family="Arial" font-size="12.00">ERROR</text>
<text text-anchor="middle" x="93.6" y="-6.85" font-family="Arial" font-size="12.00">General error state</text>
</g>
<!-- HOMING&#45;&gt;ERROR -->
<g id="edge3" class="edge">
<title>HOMING&#45;&gt;ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M68.45,-141.06C43.93,-133.15 20.55,-120.29 5.35,-99.5 -10.61,-77.67 12.68,-57.22 39.33,-42.44"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="40.72,-45.26 47.23,-38.29 37.8,-39.68 40.72,-45.26"/>
<text text-anchor="middle" x="52.97" y="-82.3" font-family="Arial" font-size="11.00">Position motor error</text>
</g>
<!-- CUT_MOTOR_HOME_ERROR -->
<g id="node10" class="node">
<title>CUT_MOTOR_HOME_ERROR</title>
<polygon fill="#ffcccb" stroke="#0078d7" stroke-width="2" points="569.35,-36.5 383.85,-36.5 383.85,0 569.35,0 569.35,-36.5"/>
<text text-anchor="middle" x="476.6" y="-21.1" font-family="Arial" font-size="12.00">CUT_MOTOR_HOME_ERROR</text>
<text text-anchor="middle" x="476.6" y="-6.85" font-family="Arial" font-size="12.00">Cut motor homing failure</text>
</g>
<!-- HOMING&#45;&gt;CUT_MOTOR_HOME_ERROR -->
<g id="edge4" class="edge">
<title>HOMING&#45;&gt;CUT_MOTOR_HOME_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M205.28,-134.65C236.8,-117.55 286.1,-91.72 330.35,-72.5 356.6,-61.09 386.17,-50.01 411.82,-40.93"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="412.64,-43.98 420.09,-38.03 410.56,-38.04 412.64,-43.98"/>
<text text-anchor="middle" x="367.47" y="-82.3" font-family="Arial" font-size="11.00">Cut motor error</text>
</g>
<!-- RELOAD -->
<g id="node4" class="node">
<title>RELOAD</title>
<polygon fill="#ccffff" stroke="#0078d7" stroke-width="2" points="1247.72,-471.7 1085.47,-471.7 1085.47,-435.2 1247.72,-435.2 1247.72,-471.7"/>
<text text-anchor="middle" x="1166.6" y="-456.3" font-family="Arial" font-size="12.00">RELOAD</text>
<text text-anchor="middle" x="1166.6" y="-442.05" font-family="Arial" font-size="12.00">Waiting for reload switch off</text>
</g>
<!-- READY&#45;&gt;RELOAD -->
<g id="edge5" class="edge">
<title>READY&#45;&gt;RELOAD</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M936.82,-439.65C947,-438.55 957.22,-437.6 967.04,-436.95 1005.62,-434.38 1015.47,-434.14 1054.04,-436.95 1060.57,-437.43 1067.29,-438.06 1074.05,-438.79"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="1073.57,-441.91 1082.88,-439.82 1074.3,-435.65 1073.57,-441.91"/>
<text text-anchor="middle" x="1010.54" y="-440" font-family="Arial" font-size="11.00">Reload switch ON</text>
</g>
<!-- CUTTING -->
<g id="node5" class="node">
<title>CUTTING</title>
<polygon fill="#ffffcc" stroke="#0078d7" stroke-width="2" points="925.1,-307.5 762.1,-307.5 762.1,-271 925.1,-271 925.1,-307.5"/>
<text text-anchor="middle" x="843.6" y="-292.1" font-family="Arial" font-size="12.00">CUTTING</text>
<text text-anchor="middle" x="843.6" y="-277.85" font-family="Arial" font-size="12.00">Executing cutting sequence</text>
</g>
<!-- READY&#45;&gt;CUTTING -->
<g id="edge6" class="edge">
<title>READY&#45;&gt;CUTTING</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M843.6,-408.98C843.6,-381.76 843.6,-347.26 843.6,-322.48"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="846.75,-322.56 843.6,-313.56 840.45,-322.56 846.75,-322.56"/>
<text text-anchor="middle" x="888.6" y="-363.8" font-family="Arial" font-size="11.00">Cycle switch ON &amp;</text>
<text text-anchor="middle" x="888.6" y="-350.3" font-family="Arial" font-size="11.00">Toggle not needed</text>
</g>
<!-- RELOAD&#45;&gt;READY -->
<g id="edge7" class="edge">
<title>RELOAD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M1084.64,-453.45C1042.99,-453.45 991.94,-453.45 947.56,-453.45"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="947.84,-450.3 938.84,-453.45 947.84,-456.6 947.84,-450.3"/>
<text text-anchor="middle" x="1010.54" y="-459.5" font-family="Arial" font-size="11.00">Reload switch OFF</text>
</g>
<!-- YESWOOD -->
<g id="node6" class="node">
<title>YESWOOD</title>
<polygon fill="#e6ffe6" stroke="#0078d7" stroke-width="2" points="722.22,-172 580.97,-172 580.97,-135.5 722.22,-135.5 722.22,-172"/>
<text text-anchor="middle" x="651.6" y="-156.6" font-family="Arial" font-size="12.00">YESWOOD</text>
<text text-anchor="middle" x="651.6" y="-142.35" font-family="Arial" font-size="12.00">Wood detected after cut</text>
</g>
<!-- CUTTING&#45;&gt;YESWOOD -->
<g id="edge8" class="edge">
<title>CUTTING&#45;&gt;YESWOOD</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M761.26,-276.58C712.95,-267.87 658.56,-254.14 643.85,-235 633.47,-221.49 634.71,-202.68 638.87,-186.67"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="641.85,-187.7 641.6,-178.17 635.85,-185.78 641.85,-187.7"/>
<text text-anchor="middle" x="680.22" y="-217.8" font-family="Arial" font-size="11.00">Wood detected</text>
</g>
<!-- NOWOOD -->
<g id="node7" class="node">
<title>NOWOOD</title>
<polygon fill="#e6e6ff" stroke="#0078d7" stroke-width="2" points="1032.47,-172 874.72,-172 874.72,-135.5 1032.47,-135.5 1032.47,-172"/>
<text text-anchor="middle" x="953.6" y="-156.6" font-family="Arial" font-size="12.00">NOWOOD</text>
<text text-anchor="middle" x="953.6" y="-142.35" font-family="Arial" font-size="12.00">No wood detected after cut</text>
</g>
<!-- CUTTING&#45;&gt;NOWOOD -->
<g id="edge9" class="edge">
<title>CUTTING&#45;&gt;NOWOOD</title>
<path fill="none" stroke="#ffcc00" stroke-width="2.4" d="M862.59,-270.15C872.76,-260.13 885.28,-247.26 895.6,-235 909.54,-218.44 923.8,-198.75 934.69,-183.02"/>
<polygon fill="#ffcc00" stroke="#ffcc00" stroke-width="2.4" points="937.12,-185.05 939.6,-175.85 931.92,-181.5 937.12,-185.05"/>
<text text-anchor="middle" x="959.68" y="-217.8" font-family="Arial" font-size="11.00">No wood detected</text>
</g>
<!-- WOOD_SUCTION_ERROR -->
<g id="node9" class="node">
<title>WOOD_SUCTION_ERROR</title>
<polygon fill="#ffcccb" stroke="#0078d7" stroke-width="2" points="1105.97,-36.5 939.22,-36.5 939.22,0 1105.97,0 1105.97,-36.5"/>
<text text-anchor="middle" x="1022.6" y="-21.1" font-family="Arial" font-size="12.00">WOOD_SUCTION_ERROR</text>
<text text-anchor="middle" x="1022.6" y="-6.85" font-family="Arial" font-size="12.00">Wood suction failure</text>
</g>
<!-- CUTTING&#45;&gt;WOOD_SUCTION_ERROR -->
<g id="edge10" class="edge">
<title>CUTTING&#45;&gt;WOOD_SUCTION_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M925.8,-274.9C956.69,-266.98 990.78,-254.52 1017.6,-235 1045.22,-214.9 1051.35,-204.58 1061.6,-172 1075.24,-128.65 1054.78,-77.28 1038.72,-46.53"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="1041.64,-45.3 1034.57,-38.9 1036.1,-48.31 1041.64,-45.3"/>
<text text-anchor="middle" x="1100.19" y="-150.05" font-family="Arial" font-size="11.00">Suction failure</text>
</g>
<!-- YESWOOD&#45;&gt;READY -->
<g id="edge11" class="edge">
<title>YESWOOD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M632.32,-172.88C590.34,-213.94 498.49,-313.63 550.44,-354.02"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="548.76,-356.68 558.06,-358.79 552.1,-351.34 548.76,-356.68"/>
<text text-anchor="middle" x="604.44" y="-292.3" font-family="Arial" font-size="11.00">Operation complete or</text>
<text text-anchor="middle" x="604.44" y="-278.8" font-family="Arial" font-size="11.00">reload requested</text>
</g>
<!-- YESWOOD&#45;&gt;CUTTING -->
<g id="edge12" class="edge">
<title>YESWOOD&#45;&gt;CUTTING</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M677.7,-172.9C710.86,-195.96 768.34,-235.92 806.17,-262.22"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="804.04,-264.58 813.23,-267.14 807.64,-259.41 804.04,-264.58"/>
<text text-anchor="middle" x="817.67" y="-224.55" font-family="Arial" font-size="11.00">Continue cutting while</text>
<text text-anchor="middle" x="817.67" y="-211.05" font-family="Arial" font-size="11.00">wood is available</text>
</g>
<!-- YESWOOD&#45;&gt;CUT_MOTOR_HOME_ERROR -->
<g id="edge13" class="edge">
<title>YESWOOD&#45;&gt;CUT_MOTOR_HOME_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M641,-134.83C629.81,-117.12 610.73,-90.2 588.6,-72.5 573.21,-60.19 554.5,-49.88 536.82,-41.7"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="538.29,-38.91 528.79,-38.12 535.72,-44.66 538.29,-38.91"/>
<text text-anchor="middle" x="649.16" y="-89.05" font-family="Arial" font-size="11.00">Cut motor fails</text>
<text text-anchor="middle" x="649.16" y="-75.55" font-family="Arial" font-size="11.00">to home</text>
</g>
<!-- NOWOOD&#45;&gt;READY -->
<g id="edge14" class="edge">
<title>NOWOOD&#45;&gt;READY</title>
<path fill="none" stroke="#ffcc00" stroke-width="2.4" d="M985.72,-172.91C998.08,-181.75 1010.85,-193.6 1017.6,-208 1022.69,-218.87 1020.37,-223.32 1017.6,-235 1001.61,-302.4 992.01,-321.09 947.6,-374.25 939.72,-383.68 930.5,-392.63 920.86,-400.88"/>
<polygon fill="#ffcc00" stroke="#ffcc00" stroke-width="2.4" points="918.88,-398.43 913.92,-406.58 922.88,-403.3 918.88,-398.43"/>
<text text-anchor="middle" x="1047.69" y="-285.55" font-family="Arial" font-size="11.00">Return complete</text>
</g>
<!-- ERROR&#45;&gt;HOMING -->
<g id="edge15" class="edge">
<title>ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M104.34,-37.4C117.81,-60.16 141.02,-99.38 156.59,-125.69"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="153.73,-127.04 161.02,-133.18 159.15,-123.83 153.73,-127.04"/>
<text text-anchor="middle" x="191.93" y="-82.3" font-family="Arial" font-size="11.00">Cycle toggle detected</text>
</g>
<!-- WOOD_SUCTION_ERROR&#45;&gt;HOMING -->
<g id="edge16" class="edge">
<title>WOOD_SUCTION_ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M960.24,-37.43C895.22,-55.73 790.08,-83.47 697.6,-99.5 557.39,-123.8 394.05,-138.21 287.26,-145.79"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="287.36,-142.63 278.6,-146.4 287.8,-148.91 287.36,-142.63"/>
<text text-anchor="middle" x="875.36" y="-82.3" font-family="Arial" font-size="11.00">Cycle toggle detected</text>
</g>
<!-- CUT_MOTOR_HOME_ERROR&#45;&gt;HOMING -->
<g id="edge17" class="edge">
<title>CUT_MOTOR_HOME_ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M467.6,-37.25C457.35,-55.81 438.84,-84.14 414.6,-99.5 376.75,-123.48 329.64,-136.77 287.06,-144.08"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="286.81,-140.94 278.43,-145.49 287.82,-147.15 286.81,-140.94"/>
<text text-anchor="middle" x="497.41" y="-89.05" font-family="Arial" font-size="11.00">Successful recovery or</text>
<text text-anchor="middle" x="497.41" y="-75.55" font-family="Arial" font-size="11.00">Cycle toggle</text>
</g>
</g>
</svg>
