<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 12.2.1 (20241206.2353)
 -->
<!-- Title: StateMachine Pages: 1 -->
<svg width="1700pt" height="722pt"
 viewBox="0.00 0.00 1700.25 721.75" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 717.75)">
<title>StateMachine</title>
<polygon fill="white" stroke="none" points="-4,4 -4,-717.75 1696.25,-717.75 1696.25,4 -4,4"/>
<text text-anchor="middle" x="846.12" y="-694.55" font-family="Arial" font-size="16.00">ESP32&#45;S3 Stage 1 State Machine</text>
<!-- STARTUP -->
<g id="node1" class="node">
<title>STARTUP</title>
<path fill="#d4f4fa" stroke="#0078d7" stroke-width="2" d="M1103,-687C1103,-687 985,-687 985,-687 979,-687 973,-681 973,-675 973,-675 973,-662.5 973,-662.5 973,-656.5 979,-650.5 985,-650.5 985,-650.5 1103,-650.5 1103,-650.5 1109,-650.5 1115,-656.5 1115,-662.5 1115,-662.5 1115,-675 1115,-675 1115,-681 1109,-687 1103,-687"/>
<text text-anchor="middle" x="1044" y="-671.6" font-family="Arial" font-size="12.00">STARTUP</text>
<text text-anchor="middle" x="1044" y="-657.35" font-family="Arial" font-size="12.00">Initial state, sets clamps</text>
</g>
<!-- HOMING -->
<g id="node2" class="node">
<title>HOMING</title>
<path fill="#d4f4fa" stroke="#0078d7" stroke-width="2" d="M1135.25,-565C1135.25,-565 952.75,-565 952.75,-565 946.75,-565 940.75,-559 940.75,-553 940.75,-553 940.75,-540.5 940.75,-540.5 940.75,-534.5 946.75,-528.5 952.75,-528.5 952.75,-528.5 1135.25,-528.5 1135.25,-528.5 1141.25,-528.5 1147.25,-534.5 1147.25,-540.5 1147.25,-540.5 1147.25,-553 1147.25,-553 1147.25,-559 1141.25,-565 1135.25,-565"/>
<text text-anchor="middle" x="1044" y="-549.6" font-family="Arial" font-size="12.00">HOMING</text>
<text text-anchor="middle" x="1044" y="-535.35" font-family="Arial" font-size="12.00">Calibrates motors to home positions</text>
</g>
<!-- STARTUP&#45;&gt;HOMING -->
<g id="edge1" class="edge">
<title>STARTUP&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M1044,-649.52C1044,-630.12 1044,-599.14 1044,-576.45"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="1047.15,-576.57 1044,-567.57 1040.85,-576.57 1047.15,-576.57"/>
<text text-anchor="middle" x="1069.12" y="-604.05" font-family="Arial" font-size="11.00">Immediate</text>
</g>
<!-- READY -->
<g id="node3" class="node">
<title>READY</title>
<path fill="#ccffcc" stroke="#0078d7" stroke-width="2" d="M520.25,-443C520.25,-443 403.75,-443 403.75,-443 397.75,-443 391.75,-437 391.75,-431 391.75,-431 391.75,-418.5 391.75,-418.5 391.75,-412.5 397.75,-406.5 403.75,-406.5 403.75,-406.5 520.25,-406.5 520.25,-406.5 526.25,-406.5 532.25,-412.5 532.25,-418.5 532.25,-418.5 532.25,-431 532.25,-431 532.25,-437 526.25,-443 520.25,-443"/>
<text text-anchor="middle" x="462" y="-427.6" font-family="Arial" font-size="12.00">READY</text>
<text text-anchor="middle" x="462" y="-413.35" font-family="Arial" font-size="12.00">Waiting for cycle switch</text>
</g>
<!-- HOMING&#45;&gt;READY -->
<g id="edge2" class="edge">
<title>HOMING&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M955.61,-527.52C843.59,-504.43 652.05,-464.94 543.44,-442.54"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="544.1,-439.46 534.65,-440.73 542.83,-445.63 544.1,-439.46"/>
<text text-anchor="middle" x="812.45" y="-482.05" font-family="Arial" font-size="11.00">Homing complete</text>
</g>
<!-- ERROR -->
<g id="node8" class="node">
<title>ERROR</title>
<path fill="#ffd2d2" stroke="#0078d7" stroke-width="2" d="M1532.5,-36.5C1532.5,-36.5 1441.5,-36.5 1441.5,-36.5 1435.5,-36.5 1429.5,-30.5 1429.5,-24.5 1429.5,-24.5 1429.5,-12 1429.5,-12 1429.5,-6 1435.5,0 1441.5,0 1441.5,0 1532.5,0 1532.5,0 1538.5,0 1544.5,-6 1544.5,-12 1544.5,-12 1544.5,-24.5 1544.5,-24.5 1544.5,-30.5 1538.5,-36.5 1532.5,-36.5"/>
<text text-anchor="middle" x="1487" y="-21.1" font-family="Arial" font-size="12.00">ERROR</text>
<text text-anchor="middle" x="1487" y="-6.85" font-family="Arial" font-size="12.00">General error state</text>
</g>
<!-- HOMING&#45;&gt;ERROR -->
<g id="edge3" class="edge">
<title>HOMING&#45;&gt;ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M1148.02,-544.15C1308.21,-538.82 1597,-516.62 1597,-425.75 1597,-425.75 1597,-425.75 1597,-152.75 1597,-106.36 1556.95,-67.34 1525.18,-43.7"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="1527.1,-41.2 1517.95,-38.5 1523.42,-46.31 1527.1,-41.2"/>
<text text-anchor="middle" x="1644.62" y="-285.55" font-family="Arial" font-size="11.00">Position motor error</text>
</g>
<!-- CUT_MOTOR_HOME_ERROR -->
<g id="node10" class="node">
<title>CUT_MOTOR_HOME_ERROR</title>
<path fill="#ffcccb" stroke="#0078d7" stroke-width="2" d="M363.75,-36.5C363.75,-36.5 202.25,-36.5 202.25,-36.5 196.25,-36.5 190.25,-30.5 190.25,-24.5 190.25,-24.5 190.25,-12 190.25,-12 190.25,-6 196.25,0 202.25,0 202.25,0 363.75,0 363.75,0 369.75,0 375.75,-6 375.75,-12 375.75,-12 375.75,-24.5 375.75,-24.5 375.75,-30.5 369.75,-36.5 363.75,-36.5"/>
<text text-anchor="middle" x="283" y="-21.1" font-family="Arial" font-size="12.00">CUT_MOTOR_HOME_ERROR</text>
<text text-anchor="middle" x="283" y="-6.85" font-family="Arial" font-size="12.00">Cut motor homing failure</text>
</g>
<!-- HOMING&#45;&gt;CUT_MOTOR_HOME_ERROR -->
<g id="edge4" class="edge">
<title>HOMING&#45;&gt;CUT_MOTOR_HOME_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M940.08,-544.56C676.01,-540.16 0,-519.71 0,-425.75 0,-425.75 0,-425.75 0,-152.75 0,-70.7 98.51,-39 179.29,-26.79"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="179.29,-29.98 187.75,-25.59 178.4,-23.74 179.29,-29.98"/>
<text text-anchor="middle" x="37.12" y="-285.55" font-family="Arial" font-size="11.00">Cut motor error</text>
</g>
<!-- RELOAD -->
<g id="node4" class="node">
<title>RELOAD</title>
<path fill="#ccffff" stroke="#0078d7" stroke-width="2" d="M832.12,-443C832.12,-443 693.88,-443 693.88,-443 687.88,-443 681.88,-437 681.88,-431 681.88,-431 681.88,-418.5 681.88,-418.5 681.88,-412.5 687.88,-406.5 693.88,-406.5 693.88,-406.5 832.12,-406.5 832.12,-406.5 838.12,-406.5 844.12,-412.5 844.12,-418.5 844.12,-418.5 844.12,-431 844.12,-431 844.12,-437 838.12,-443 832.12,-443"/>
<text text-anchor="middle" x="763" y="-427.6" font-family="Arial" font-size="12.00">RELOAD</text>
<text text-anchor="middle" x="763" y="-413.35" font-family="Arial" font-size="12.00">Waiting for reload switch off</text>
</g>
<!-- READY&#45;&gt;RELOAD -->
<g id="edge5" class="edge">
<title>READY&#45;&gt;RELOAD</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M533.13,-411.71C543.31,-410.27 553.68,-409.05 563.56,-408.25 602.1,-405.14 612,-405.44 650.56,-408.25 657.08,-408.73 663.8,-409.36 670.55,-410.09"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="670.06,-413.2 679.37,-411.12 670.79,-406.95 670.06,-413.2"/>
<text text-anchor="middle" x="607.06" y="-411.3" font-family="Arial" font-size="11.00">Reload switch ON</text>
</g>
<!-- CUTTING -->
<g id="node5" class="node">
<title>CUTTING</title>
<path fill="#ffffcc" stroke="#0078d7" stroke-width="2" d="M531.5,-307.5C531.5,-307.5 392.5,-307.5 392.5,-307.5 386.5,-307.5 380.5,-301.5 380.5,-295.5 380.5,-295.5 380.5,-283 380.5,-283 380.5,-277 386.5,-271 392.5,-271 392.5,-271 531.5,-271 531.5,-271 537.5,-271 543.5,-277 543.5,-283 543.5,-283 543.5,-295.5 543.5,-295.5 543.5,-301.5 537.5,-307.5 531.5,-307.5"/>
<text text-anchor="middle" x="462" y="-292.1" font-family="Arial" font-size="12.00">CUTTING</text>
<text text-anchor="middle" x="462" y="-277.85" font-family="Arial" font-size="12.00">Executing cutting sequence</text>
</g>
<!-- READY&#45;&gt;CUTTING -->
<g id="edge6" class="edge">
<title>READY&#45;&gt;CUTTING</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M462,-405.75C462,-384.55 462,-348.92 462,-322.83"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="465.15,-322.84 462,-313.84 458.85,-322.84 465.15,-322.84"/>
<text text-anchor="middle" x="507" y="-360.05" font-family="Arial" font-size="11.00">Cycle switch ON &amp;</text>
<text text-anchor="middle" x="507" y="-346.55" font-family="Arial" font-size="11.00">Toggle not needed</text>
</g>
<!-- RELOAD&#45;&gt;READY -->
<g id="edge7" class="edge">
<title>RELOAD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M681.07,-424.75C638.35,-424.75 586.26,-424.75 543.59,-424.75"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="543.77,-421.6 534.77,-424.75 543.77,-427.9 543.77,-421.6"/>
<text text-anchor="middle" x="607.06" y="-430.8" font-family="Arial" font-size="11.00">Reload switch OFF</text>
</g>
<!-- YESWOOD -->
<g id="node6" class="node">
<title>YESWOOD</title>
<path fill="#e6ffe6" stroke="#0078d7" stroke-width="2" d="M341.62,-172C341.62,-172 224.38,-172 224.38,-172 218.38,-172 212.38,-166 212.38,-160 212.38,-160 212.38,-147.5 212.38,-147.5 212.38,-141.5 218.38,-135.5 224.38,-135.5 224.38,-135.5 341.62,-135.5 341.62,-135.5 347.62,-135.5 353.62,-141.5 353.62,-147.5 353.62,-147.5 353.62,-160 353.62,-160 353.62,-166 347.62,-172 341.62,-172"/>
<text text-anchor="middle" x="283" y="-156.6" font-family="Arial" font-size="12.00">YESWOOD</text>
<text text-anchor="middle" x="283" y="-142.35" font-family="Arial" font-size="12.00">Wood detected after cut</text>
</g>
<!-- CUTTING&#45;&gt;YESWOOD -->
<g id="edge8" class="edge">
<title>CUTTING&#45;&gt;YESWOOD</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M449.02,-270.18C435.72,-252.62 413.68,-226.03 390,-208 375.41,-196.89 358.14,-187.11 341.78,-179.06"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="343.34,-176.31 333.85,-175.31 340.64,-182 343.34,-176.31"/>
<text text-anchor="middle" x="454.73" y="-217.8" font-family="Arial" font-size="11.00">Wood detected</text>
</g>
<!-- NOWOOD -->
<g id="node7" class="node">
<title>NOWOOD</title>
<path fill="#e6e6ff" stroke="#0078d7" stroke-width="2" d="M647.88,-172C647.88,-172 514.12,-172 514.12,-172 508.12,-172 502.12,-166 502.12,-160 502.12,-160 502.12,-147.5 502.12,-147.5 502.12,-141.5 508.12,-135.5 514.12,-135.5 514.12,-135.5 647.88,-135.5 647.88,-135.5 653.88,-135.5 659.88,-141.5 659.88,-147.5 659.88,-147.5 659.88,-160 659.88,-160 659.88,-166 653.88,-172 647.88,-172"/>
<text text-anchor="middle" x="581" y="-156.6" font-family="Arial" font-size="12.00">NOWOOD</text>
<text text-anchor="middle" x="581" y="-142.35" font-family="Arial" font-size="12.00">No wood detected after cut</text>
</g>
<!-- CUTTING&#45;&gt;NOWOOD -->
<g id="edge9" class="edge">
<title>CUTTING&#45;&gt;NOWOOD</title>
<path fill="none" stroke="#ffcc00" stroke-width="2.4" d="M486.8,-270.23C499.28,-260.53 514.22,-247.93 526,-235 540.51,-219.07 554.22,-199.09 564.32,-183.05"/>
<polygon fill="#ffcc00" stroke="#ffcc00" stroke-width="2.4" points="566.76,-185.09 568.79,-175.77 561.4,-181.79 566.76,-185.09"/>
<text text-anchor="middle" x="589.97" y="-217.8" font-family="Arial" font-size="11.00">No wood detected</text>
</g>
<!-- WOOD_SUCTION_ERROR -->
<g id="node9" class="node">
<title>WOOD_SUCTION_ERROR</title>
<path fill="#ffcccb" stroke="#0078d7" stroke-width="2" d="M1038.38,-36.5C1038.38,-36.5 895.62,-36.5 895.62,-36.5 889.62,-36.5 883.62,-30.5 883.62,-24.5 883.62,-24.5 883.62,-12 883.62,-12 883.62,-6 889.62,0 895.62,0 895.62,0 1038.38,0 1038.38,0 1044.38,0 1050.38,-6 1050.38,-12 1050.38,-12 1050.38,-24.5 1050.38,-24.5 1050.38,-30.5 1044.38,-36.5 1038.38,-36.5"/>
<text text-anchor="middle" x="967" y="-21.1" font-family="Arial" font-size="12.00">WOOD_SUCTION_ERROR</text>
<text text-anchor="middle" x="967" y="-6.85" font-family="Arial" font-size="12.00">Wood suction failure</text>
</g>
<!-- CUTTING&#45;&gt;WOOD_SUCTION_ERROR -->
<g id="edge10" class="edge">
<title>CUTTING&#45;&gt;WOOD_SUCTION_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M544.12,-270.7C577.24,-262.11 615.28,-250.27 648,-235 763.3,-181.18 883.47,-88.14 937.55,-43.94"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="939.29,-46.58 944.25,-38.43 935.29,-41.72 939.29,-46.58"/>
<text text-anchor="middle" x="847.77" y="-150.05" font-family="Arial" font-size="11.00">Suction failure</text>
</g>
<!-- YESWOOD&#45;&gt;READY -->
<g id="edge11" class="edge">
<title>YESWOOD&#45;&gt;READY</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M268.26,-172.8C261.13,-182.61 253.21,-195.3 249,-208 244.59,-221.31 237.82,-296.35 244.5,-307.5 273.94,-356.61 331.98,-386.14 380.7,-403.14"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="379.69,-406.12 389.22,-406 381.69,-400.15 379.69,-406.12"/>
<text text-anchor="middle" x="297.75" y="-292.3" font-family="Arial" font-size="11.00">Operation complete or</text>
<text text-anchor="middle" x="297.75" y="-278.8" font-family="Arial" font-size="11.00">reload requested</text>
</g>
<!-- YESWOOD&#45;&gt;CUTTING -->
<g id="edge12" class="edge">
<title>YESWOOD&#45;&gt;CUTTING</title>
<path fill="none" stroke="#006600" stroke-width="3.6" d="M273.05,-172.89C264.88,-190.51 256.68,-217.14 270.25,-235 282.58,-251.22 324.23,-263.79 365.58,-272.64"/>
<polygon fill="#006600" stroke="#006600" stroke-width="3.6" points="364.76,-275.69 374.21,-274.41 366.03,-269.52 364.76,-275.69"/>
<text text-anchor="middle" x="323.12" y="-224.55" font-family="Arial" font-size="11.00">Continue cutting while</text>
<text text-anchor="middle" x="323.12" y="-211.05" font-family="Arial" font-size="11.00">wood is available</text>
</g>
<!-- YESWOOD&#45;&gt;CUT_MOTOR_HOME_ERROR -->
<g id="edge13" class="edge">
<title>YESWOOD&#45;&gt;CUT_MOTOR_HOME_ERROR</title>
<path fill="none" stroke="#cc0000" stroke-width="1.2" d="M283,-134.75C283,-112.45 283,-74.2 283,-47.87"/>
<polygon fill="#cc0000" stroke="#cc0000" stroke-width="1.2" points="286.15,-48.21 283,-39.21 279.85,-48.21 286.15,-48.21"/>
<text text-anchor="middle" x="317.88" y="-89.05" font-family="Arial" font-size="11.00">Cut motor fails</text>
<text text-anchor="middle" x="317.88" y="-75.55" font-family="Arial" font-size="11.00">to home</text>
</g>
<!-- NOWOOD&#45;&gt;READY -->
<g id="edge14" class="edge">
<title>NOWOOD&#45;&gt;READY</title>
<path fill="none" stroke="#ffcc00" stroke-width="2.4" d="M614.94,-172.83C627.77,-181.6 640.96,-193.41 648,-208 653.22,-218.81 651.23,-223.44 648,-235 629.08,-302.8 617.51,-322.52 566,-370.5 553.28,-382.35 537.42,-392.23 521.95,-400.14"/>
<polygon fill="#ffcc00" stroke="#ffcc00" stroke-width="2.4" points="520.8,-397.2 514.07,-403.96 523.55,-402.86 520.8,-397.2"/>
<text text-anchor="middle" x="676.31" y="-285.55" font-family="Arial" font-size="11.00">Return complete</text>
</g>
<!-- ERROR&#45;&gt;HOMING -->
<g id="edge15" class="edge">
<title>ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M1457.52,-37.44C1424.94,-60.07 1377,-102 1377,-152.75 1377,-425.75 1377,-425.75 1377,-425.75 1377,-473.41 1254.77,-507.36 1158.42,-526.73"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="1157.99,-523.6 1149.78,-528.44 1159.22,-529.78 1157.99,-523.6"/>
<text text-anchor="middle" x="1428.75" y="-285.55" font-family="Arial" font-size="11.00">Cycle toggle detected</text>
</g>
<!-- WOOD_SUCTION_ERROR&#45;&gt;HOMING -->
<g id="edge16" class="edge">
<title>WOOD_SUCTION_ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M1036.67,-37.48C1090.9,-56.37 1157,-91.88 1157,-152.75 1157,-425.75 1157,-425.75 1157,-425.75 1157,-467.99 1119.43,-501.42 1087.61,-522.15"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="1086.32,-519.25 1080.36,-526.69 1089.66,-524.58 1086.32,-519.25"/>
<text text-anchor="middle" x="1208.75" y="-285.55" font-family="Arial" font-size="11.00">Cycle toggle detected</text>
</g>
<!-- CUT_MOTOR_HOME_ERROR&#45;&gt;HOMING -->
<g id="edge17" class="edge">
<title>CUT_MOTOR_HOME_ERROR&#45;&gt;HOMING</title>
<path fill="none" stroke="#666666" stroke-width="1.2" d="M376.68,-19.28C556.41,-21.89 932,-40.74 932,-152.75 932,-425.75 932,-425.75 932,-425.75 932,-467.64 968.92,-500.99 1000.37,-521.79"/>
<polygon fill="#666666" stroke="#666666" stroke-width="1.2" points="998.66,-524.44 1007.95,-526.61 1002.04,-519.12 998.66,-524.44"/>
<text text-anchor="middle" x="986.38" y="-292.3" font-family="Arial" font-size="11.00">Successful recovery or</text>
<text text-anchor="middle" x="986.38" y="-278.8" font-family="Arial" font-size="11.00">Cycle toggle</text>
</g>
</g>
</svg>
